# ç¢³å¾ªç¯é¥®é£Ÿè®¡ç®—å™¨ - å¼€å‘è®¡åˆ’

æœ¬æ–‡æ¡£æ ¹æ®äº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰åˆ¶å®šï¼Œæ—¨åœ¨å°†é¡¹ç›®åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å¼€å‘ä»»åŠ¡ï¼Œå¹¶è§„åˆ’å¼€å‘æµç¨‹ã€‚

## é¡¹ç›®è¿›åº¦æ¦‚è§ˆ

### âœ… å·²å®Œæˆçš„åŠŸèƒ½
- **é¡¹ç›®åˆå§‹åŒ–ä¸æŠ€æœ¯æ ˆæ­å»º** - Vite + React + TypeScript + shadcn/ui
- **åŸºç¡€å¸ƒå±€ä¸å“åº”å¼è®¾è®¡** - æ¡Œé¢ç«¯/ç§»åŠ¨ç«¯å¸ƒå±€é€‚é…ï¼Œå¤šæ–­ç‚¹ä¼˜åŒ–
- **ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½** - light/dark/system æ¨¡å¼ï¼ŒlocalStorageæŒä¹…åŒ–
- **åŠ¨æ€ç²’å­èƒŒæ™¯** - react-tsparticles é›†æˆï¼Œä¸»é¢˜å“åº”
- **ç»ç’ƒæ‹Ÿæ€å¡ç‰‡æ ·å¼** - InputForm å’Œ ResultCard çš„ Glassmorphism æ•ˆæœ
- **InputForm ç»„ä»¶** - å®Œæ•´çš„ç”¨æˆ·è¾“å…¥è¡¨å•ï¼ŒåŒ…æ‹¬ï¼š
  - åŸºç¡€ä¿¡æ¯å½•å…¥ï¼ˆå¹´é¾„ã€æ€§åˆ«ã€èº«é«˜ã€ä½“é‡ï¼‰
  - ä½“å‹é€‰æ‹©ä¸è¥å…»ç³»æ•°è‡ªåŠ¨å¡«å……
  - åŠ¨æ€æè¿°æ˜¾ç¤º
  - æ´»åŠ¨æ°´å¹³å’Œå¾ªç¯å¤©æ•°è®¾ç½®
  - è¡¨å•éªŒè¯ä¸ç”¨æˆ·ä½“éªŒä¼˜åŒ–
  - å®æ—¶è®¡ç®—åŠŸèƒ½ï¼ˆç§»é™¤"å¼€å§‹è®¡ç®—"æŒ‰é’®ï¼‰
  - å“åº”å¼æ–­ç‚¹ä¼˜åŒ–ï¼ˆ768px/1280pxæ–­ç‚¹ï¼‰
- **æ ¸å¿ƒè®¡ç®—é€»è¾‘** - å®Œæ•´çš„è¥å…»ç´ è®¡ç®—æ¡†æ¶ï¼ŒåŒ…æ‹¬ï¼š
  - BMRå’ŒTDEEè®¡ç®—ï¼ˆMifflin-St Jeorå…¬å¼ï¼‰
  - ç¢³å¾ªç¯è¥å…»ç´ åˆ†é…
  - çƒ­é‡å·®è®¡ç®—å’Œæ˜¾ç¤º
- **ResultCard ç»„ä»¶** - é«˜çº§ç»“æœå±•ç¤ºï¼ŒåŒ…æ‹¬ï¼š
  - å‘¨åº¦æ‘˜è¦å¡ç‰‡å±•ç¤º
  - Kanbané£æ ¼çš„æ¯æ—¥è®¡åˆ’å¸ƒå±€
  - è®­ç»ƒé¡¹ç›®ç®¡ç†ï¼ˆdropdowné€‰æ‹©å™¨ï¼‰
  - æ‹–æ‹½æ’åºåŠŸèƒ½ï¼ˆ@dnd-kitå®ç°ï¼‰
  - å¤åˆ¶ç»“æœåˆ°å‰ªè´´æ¿åŠŸèƒ½
- **Footer å…è´£å£°æ˜** - é¡µè„šå¸ƒå±€å’Œå…è´£ä¿¡æ¯

### ğŸš§ å½“å‰å¼€å‘é˜¶æ®µ - v0.3 ç”¨æˆ·ä½“éªŒä¼˜åŒ–

**ç›®æ ‡**: å®Œå–„å“åº”å¼ä½“éªŒã€å¢åŠ å¯¼å‡ºåŠŸèƒ½ã€æ•°æ®æŒä¹…åŒ–

## ğŸ¯ å¾…å®ŒæˆåŠŸèƒ½ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰

### é«˜ä¼˜å…ˆçº§ (P0)
1. **å“åº”å¼å¸ƒå±€ä¼˜åŒ–** - 1024pxä»¥ä¸‹ä½¿ç”¨è¡¨æ ¼å¸ƒå±€ï¼Œæ›´å¤§å±å¹•ä½¿ç”¨Kanbanå¸ƒå±€
2. **CSVå¯¼å‡ºåŠŸèƒ½** - å¯¼å‡ºè¥å…»è®¡åˆ’ä¸ºCSVæ ¼å¼
3. **PNGå¯¼å‡ºåŠŸèƒ½** - å¯¼å‡ºè¥å…»è®¡åˆ’ä¸ºPNGå›¾ç‰‡

### ä¸­ä¼˜å…ˆçº§ (P1)  
4. **æ•°æ®æŒä¹…åŒ–** - localStorageä¿å­˜ç”¨æˆ·è¾“å…¥å’Œè®­ç»ƒé¡¹ç›®è®¾ç½®
5. **æ‹–æ‹½ä½“éªŒä¼˜åŒ–** - è¿›ä¸€æ­¥å®Œå–„æ‹–æ‹½äº¤äº’å’Œè§†è§‰åé¦ˆ

### ä½ä¼˜å…ˆçº§ (P2)
6. **Footeræ ·å¼ä¼˜åŒ–** - è°ƒæ•´å®½åº¦å’Œè§†è§‰æ•ˆæœ
7. **SEOä¼˜åŒ–** - ä½¿ç”¨vite-plugin-pwaæˆ–react-helmet-asyncç®¡ç†metadata
8. **å›½é™…åŒ–æ”¯æŒ** - ä¸­è‹±æ–‡åˆ‡æ¢
9. **å•ä½ç³»ç»Ÿå®Œå–„** - kg/lbè½¬æ¢ä¼˜åŒ–
10. **æ€§èƒ½ä¼˜åŒ–** - ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½

## ä¿®æ”¹å»ºè®®ï¼šæ´»åŠ¨ç³»æ•° Dropdown

### Label

* æ”¹ä¸ºï¼š`æ´»åŠ¨ç³»æ•°*`
* è§£é‡Šï¼šæ›´å‡†ç¡®åœ°è¡¨è¾¾è¿™æ˜¯ä¸€ä¸ªç”¨äºè®¡ç®— TDEE çš„å‚æ•°ï¼Œè€Œä¸æ˜¯æ—¥å¸¸æ´»åŠ¨æè¿°ã€‚

### Tooltip æç¤ºæ–‡æ¡ˆ

* ä¸­æ–‡ï¼š

  > æ´»åŠ¨ç³»æ•°ç”¨äºè®¡ç®— TDEEï¼ˆæ¯æ—¥æ€»èƒ½é‡æ¶ˆè€—ï¼‰ï¼Œä¸ä¼šå½±å“ç¢³å¾ªç¯è®¡åˆ’çš„åˆ†é…ã€‚è‹¥ä¸ç¡®å®šï¼Œæ¨èé€‰æ‹©â€œä¸­åº¦â€ã€‚

* è‹±æ–‡ï¼š

  > Activity factor is used to calculate TDEE (total daily energy expenditure). It does not affect carb cycling plan distribution. If unsure, choose "Moderate".

### Dropdown Options ç¤ºä¾‹

* ä¹…å â€“ å‡ ä¹ä¸è¿åŠ¨ï¼ˆåŠå…¬å®¤ï¼‰  |  Sedentary â€“ Office job, little/no exercise
* è½»åº¦ â€“ è½»è¿åŠ¨ 1â€“3 æ¬¡/å‘¨  |  Lightly active â€“ Exercise 1â€“3 times/week
* ä¸­åº¦ â€“ è§„å¾‹è®­ç»ƒ 3â€“5 æ¬¡/å‘¨  |  Moderate â€“ Exercise 3â€“5 times/week
* æ´»è·ƒ â€“ é«˜å¼ºåº¦è®­ç»ƒ 6â€“7 æ¬¡/å‘¨  |  Very active â€“ Exercise 6â€“7 times/week
* æé«˜ â€“ èŒä¸šè¿åŠ¨å‘˜ / ä½“åŠ›åŠ³åŠ¨  |  Extra active â€“ Athlete or physical job

### è§†è§‰/äº¤äº’å»ºè®®

* Label å³ä¾§åŠ  `?` æˆ– `*`ï¼Œhover æ—¶æ˜¾ç¤º tooltipã€‚
* é»˜è®¤å€¼å¯è®¾ç½®ä¸º **ä¸­åº¦ (Moderate)**ï¼Œç¬¦åˆå¤§å¤šæ•°å¥èº«ç”¨æˆ·ä½¿ç”¨åœºæ™¯ã€‚


## ğŸ›  æŠ€æœ¯å®ç°è§„åˆ’

### å“åº”å¼å¸ƒå±€æ–­ç‚¹è®¾è®¡
- **< 768px**: æ‰‹æœºç«¯å‚ç›´å¸ƒå±€
- **768px - 1023px**: å¹³æ¿ç«¯ï¼ŒInputFormå•è¡Œï¼ŒResultCardä½¿ç”¨è¡¨æ ¼å¸ƒå±€
- **1024px+**: æ¡Œé¢ç«¯ï¼ŒInputFormå•è¡Œï¼ŒResultCardä½¿ç”¨Kanbanå¸ƒå±€

### å·²å®ç°çš„æŠ€æœ¯ç‰¹æ€§

#### TDEEè®¡ç®—å…¬å¼
- **BMRè®¡ç®—**: Mifflin-St Jeorå…¬å¼
  - ç”·æ€§: BMR = 88.362 + (13.397 Ã— ä½“é‡kg) + (4.799 Ã— èº«é«˜cm) - (5.677 Ã— å¹´é¾„)
  - å¥³æ€§: BMR = 447.593 + (9.247 Ã— ä½“é‡kg) + (3.098 Ã— èº«é«˜cm) - (4.330 Ã— å¹´é¾„)
- **æ´»åŠ¨ç³»æ•°**: 
  - ä¹…å: 1.2, è½»åº¦: 1.375, ä¸­åº¦: 1.55, æ´»è·ƒ: 1.725, ææ´»è·ƒ: 1.9

#### æ‹–æ‹½åŠŸèƒ½æŠ€æœ¯æ ˆ
- **@dnd-kit/core**: æ ¸å¿ƒæ‹–æ‹½åŠŸèƒ½
- **@dnd-kit/sortable**: æ’åºåŠŸèƒ½
- **@dnd-kit/modifiers**: snapCenterToCursorä¿®é¥°ç¬¦

#### è®­ç»ƒé¡¹ç›®é¢„è®¾é€‰é¡¹
- èƒ¸éƒ¨ã€èƒŒéƒ¨ã€è…¿éƒ¨ã€è‚©éƒ¨ã€æ‰‹è‡‚ã€è…¹éƒ¨ã€å…¨èº«ã€æœ‰æ°§ã€ä¼‘æ¯

### æ•°æ®ç»“æ„è®¾è®¡
```typescript
interface UserSettings {
  formData: FormData;
  customWorkouts: string[];
  dailyWorkouts: Record<number, string>; // day index -> workout
  dayOrder: number[]; // drag&dropæ’åºçŠ¶æ€
}
```

---

## 3. æŠ€æœ¯é€‰å‹ç¡®è®¤

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **è„šæ‰‹æ¶**: Vite
- **æ¡†æ¶**: React 19+
- **è¯­è¨€**: TypeScript
- **UI ç»„ä»¶åº“**: shadcn/ui

### åŠŸèƒ½åº“
- **è¡¨å•ç®¡ç†**: react-hook-form + @hookform/resolvers
- **æ ¡éªŒ**: zod
- **æ‹–æ‹½åŠŸèƒ½**: @dnd-kit (core, sortable, modifiers)
- **åŠ¨æ€èƒŒæ™¯**: react-tsparticles

### å¾…é›†æˆåº“
- **å›½é™…åŒ–**: i18next (è®¡åˆ’ä¸­)
- **å›¾ç‰‡å¯¼å‡º**: html-to-image (è®¡åˆ’ä¸­)

---

## 4. ç»„ä»¶æ¶æ„

### å½“å‰å®ç°çŠ¶æ€
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/ (shadcn/ui + è‡ªå®šä¹‰ç»„ä»¶)
â”‚   â”‚   â”œâ”€â”€ glass-card.tsx       âœ… ç»ç’ƒæ‹Ÿæ€å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ compact-input.tsx    âœ… ç´§å‡‘è¾“å…¥æ¡†
â”‚   â”‚   â”œâ”€â”€ radio-card.tsx       âœ… å•é€‰å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ section-card.tsx     âœ… åˆ†ç»„å¡ç‰‡
â”‚   â”‚   â””â”€â”€ slider-section.tsx   âœ… æ»‘åŠ¨é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ Header.tsx           âœ… å¤´éƒ¨å¯¼èˆª
â”‚   â”‚   â””â”€â”€ Footer.tsx           âœ… é¡µè„šå…è´£
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ InputForm.tsx        âœ… è¾“å…¥è¡¨å• (å®æ—¶è®¡ç®—)
â”‚   â”‚   â””â”€â”€ ResultCard.tsx       âœ… ç»“æœå±•ç¤º (Kanbanå¸ƒå±€)
â”‚   â””â”€â”€ shared/
â”‚       â””â”€â”€ ParticleBackground.tsx âœ… ç²’å­èƒŒæ™¯
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ calculator.ts            âœ… å®Œæ•´è®¡ç®—é€»è¾‘
â”‚   â”œâ”€â”€ form-context.tsx         âœ… è¡¨å•çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ theme-context.tsx        âœ… ä¸»é¢˜ç®¡ç†
â”‚   â””â”€â”€ utils.ts                 âœ… å·¥å…·å‡½æ•°
â””â”€â”€ App.tsx                      âœ… åº”ç”¨ä¸»å…¥å£
```

---

## 5. å½“å‰å¼€å‘çŠ¶æ€

### âœ… v0.2 å·²å®Œæˆ (2024-08-23)
- å®æ—¶è®¡ç®—åŠŸèƒ½ï¼šç§»é™¤"å¼€å§‹è®¡ç®—"æŒ‰é’®ï¼Œè¡¨å•å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°ç»“æœ
- Kanbané£æ ¼ç»“æœå±•ç¤ºï¼šæŒ‰å¤©æ•°åˆ†åˆ—ï¼Œæ”¯æŒæ‹–æ‹½æ’åº
- è®­ç»ƒé¡¹ç›®ç®¡ç†ï¼šæ¯æ—¥å¯é€‰æ‹©è®­ç»ƒéƒ¨ä½
- é«˜çº§æ‹–æ‹½åŠŸèƒ½ï¼š@dnd-kitå®ç°ï¼Œæ”¯æŒå¡ç‰‡äº¤æ¢å’Œä½ç½®ç§»åŠ¨
- å“åº”å¼ä¼˜åŒ–ï¼šå¤šæ–­ç‚¹é€‚é… (768px/1280px)
- å¤åˆ¶åŠŸèƒ½ï¼šMarkdownæ ¼å¼å¤åˆ¶åˆ°å‰ªè´´æ¿

### ğŸ¯ v0.3 ä¸‹ä¸€æ­¥è®¡åˆ’
1. **å“åº”å¼å¸ƒå±€æ”¹è¿›**: 1024pxä»¥ä¸‹åˆ‡æ¢åˆ°è¡¨æ ¼å¸ƒå±€
2. **å¯¼å‡ºåŠŸèƒ½**: CSVå’ŒPNGæ ¼å¼å¯¼å‡º
3. **æ•°æ®æŒä¹…åŒ–**: localStorageå­˜å‚¨ç”¨æˆ·è®¾ç½®

### ğŸ“‹ æŠ€æœ¯å€ºåŠ¡ä¸ä¼˜åŒ–ç‚¹
- è¡¨æ ¼å¸ƒå±€ç»„ä»¶éœ€è¦é‡æ–°å®ç° (ç”¨äºä¸­ç­‰å±å¹•)
- å¯¼å‡ºåŠŸèƒ½çš„UIé›†æˆ
- æ€§èƒ½ä¼˜åŒ–ï¼šå¤§æ•°æ®é›†çš„æ‹–æ‹½æ€§èƒ½
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡æå‡
